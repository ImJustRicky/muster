<p align="center">
  <img src="assets/banner.png" alt="muster" width="100%" />
</p>

<p align="center">
  Universal deploy framework with a beautiful TUI. Pure bash, zero dependencies, fully modular.
</p>

---

**muster** gives any project a polished deploy experience — interactive dashboard, health checks, rollback, log streaming — regardless of stack. It doesn't know how to deploy your app. It knows how to run your scripts beautifully and verify everything works.

## Install

```bash
curl -fsSL https://raw.githubusercontent.com/ImJustRicky/muster/main/install.sh | bash
```

Or clone manually:

```bash
git clone https://github.com/ImJustRicky/muster.git ~/.muster/repo
ln -s ~/.muster/repo/bin/muster ~/.local/bin/muster
```

## Quick Start

```bash
cd your-project
muster setup      # guided wizard — creates deploy.json + hook scripts
muster             # open the dashboard
```

## Commands

| Command | Description |
|---------|-------------|
| `muster` | Dashboard — live health/status view with action menu |
| `muster setup` | Guided setup wizard |
| `muster deploy` | Deploy all services (respects deploy order) |
| `muster deploy api` | Deploy a specific service |
| `muster status` | Check health of all services |
| `muster logs` | Stream logs (interactive service picker) |
| `muster rollback` | Rollback a service |
| `muster cleanup` | Clean up stuck processes and old logs |
| `muster skill add <url>` | Install a skill addon |
| `muster skill list` | List installed skills |
| `muster skill remove <name>` | Remove a skill |

## How It Works

muster is an **orchestrator**, not a deployment tool. Your project provides hook scripts that do the actual work — muster runs them in order, shows beautiful output, and verifies health.

### Setup creates this in your project:

```
your-project/
├── deploy.json              ← config (generated by setup wizard)
└── .muster/
    └── hooks/
        ├── api/
        │   ├── deploy.sh    ← your deploy logic
        │   ├── health.sh    ← your health check
        │   └── rollback.sh  ← your rollback logic
        └── redis/
            ├── deploy.sh
            └── health.sh
```

### deploy.json

Clean, human-readable config:

```json
{
  "project": "myapp",
  "version": "1",
  "services": {
    "api": {
      "name": "API Server",
      "health": {
        "type": "http",
        "endpoint": "/health",
        "timeout": 10
      }
    },
    "redis": {
      "name": "Redis",
      "health": {
        "type": "tcp",
        "port": 6379,
        "timeout": 5
      }
    }
  },
  "deploy_order": ["redis", "api"]
}
```

Operations without hooks are silently skipped — no errors, no empty menu items.

## Skills

Community addons that extend muster:

```bash
muster skill add https://github.com/someone/muster-skill-ssl
muster skill add https://github.com/someone/muster-skill-notify
```

Skills are bash scripts with a `skill.json` manifest. See [docs/skills.md](docs/skills.md) for how to create one.

## Credentials

Off by default. When enabled for a service, credentials are stored in:

1. System keychain (macOS Keychain, `secret-tool`, `pass`) if available
2. Encrypted vault at `~/.muster/vault` (AES-256, passphrase-protected) as fallback

**Never** in deploy.json. **Never** in your project directory. **Never** in git.

Services with stored credentials are flagged with `⚠ KEY` in the dashboard.

## Philosophy

- **Pure bash** — zero runtime dependencies, runs anywhere
- **Modular** — each file does one thing
- **Your scripts, your way** — muster orchestrates, you decide how things deploy
- **Stack agnostic** — Docker, k8s, bare metal, cloud — if you can script it, muster can run it
- **Beautiful by default** — spinners, progress bars, live log boxes, color-coded everything

## Contributing

PRs welcome. The codebase is modular by design — each file in `lib/` is self-contained.

## License

MIT
